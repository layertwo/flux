---
apiVersion: v1
kind: Namespace
metadata:
  name: hajimari
---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: hajimari
  namespace: hajimari
spec:
  chart:
    spec:
      chart: hajimari
      sourceRef:
        kind: HelmRepository
        name: hajimari
        namespace: flux-system
  interval: 60m
  values:
    hajimari:
      defaultEnable: true
    ingress:
      main:
        enabled: true
        annotations:
          external-dns.alpha.kubernetes.io/enabled: "true"
          external-dns.alpha.kubernetes.io/hostname: "inside.layertwo.dev"
          external-dns.alpha.kubernetes.io/target: "proxy-internal.layertwo.dev"
          kubernetes.io/ingress.class: "traefik-internal"
        hosts:
        - host: inside.layertwo.dev
          paths:
            - path: /
              pathType: Prefix
              service:
                name: hajimari
                port: 3000
        tls:
          - secretName: wildcard-layertwo-dev-tls
            hosts:
              - inside.layertwo.dev
